<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent Salary Distribution System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            padding: 40px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
            display: block;
            margin: 0 auto;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .results-section {
            display: none;
            margin-top: 40px;
        }

        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .chart-title {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .distribution-details {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .distribution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .distribution-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .distribution-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .distribution-amount {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .distribution-percentage {
            font-size: 0.85em;
            color: #888;
            margin-top: 3px;
        }

        .future-value {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .future-value h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .future-value-amount {
            font-size: 3em;
            font-weight: bold;
        }

        .future-value-detail {
            margin-top: 10px;
            font-size: 1.1em;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ’° Intelligent Salary Distribution System</h1>
        <p class="subtitle">AI-powered financial planning for your future</p>

        <div class="input-section">
            <div class="form-group">
                <label for="salary">Monthly Salary (â‚¹)</label>
                <input type="number" id="salary" placeholder="Enter your monthly salary" min="10000" value="50000">
            </div>

            <div class="form-group">
                <label for="age">Age</label>
                <input type="number" id="age" placeholder="Enter your age" min="18" max="100" value="28">
            </div>

            <div class="form-group">
                <label for="risk">Risk Appetite</label>
                <select id="risk">
                    <option value="low">Low (Conservative)</option>
                    <option value="medium" selected>Medium (Balanced)</option>
                    <option value="high">High (Aggressive)</option>
                </select>
            </div>

            <button onclick="calculateDistribution()">Calculate Optimal Distribution</button>
        </div>

        <div class="results-section" id="results">
            <div class="distribution-details">
                <h2 style="color: #333; margin-bottom: 20px;">Recommended Distribution</h2>
                <div class="distribution-grid" id="distributionGrid">
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-box">
                    <h3 class="chart-title">Salary Distribution</h3>
                    <canvas id="pieChart"></canvas>
                </div>
                <div class="chart-box">
                    <h3 class="chart-title">Investment Growth Projection (10 Years)</h3>
                    <canvas id="lineChart"></canvas>
                </div>
            </div>

            <div class="future-value">
                <h3>Projected Corpus After 10 Years</h3>
                <div class="future-value-amount" id="futureValue">â‚¹0</div>
                <div class="future-value-detail" id="futureDetail"></div>
            </div>
        </div>
    </div>

    <script>
        // ML Model Logic (Rule-based with weighted scoring)
        class SalaryDistributionModel {
            predict(salary, age, risk) {
                // Base distribution
                let distribution = {
                    sip: 30,
                    emergency: 15,
                    fixedDeposit: 20,
                    expenses: 25,
                    savings: 5,
                    insurance: 5
                };

                // Age-based adjustments
                if (age < 30) {
                    distribution.sip += 10;
                    distribution.fixedDeposit -= 5;
                    distribution.emergency -= 5;
                } else if (age > 45) {
                    distribution.sip -= 10;
                    distribution.fixedDeposit += 5;
                    distribution.insurance += 5;
                }

                // Risk-based adjustments
                if (risk === 'high') {
                    distribution.sip += 10;
                    distribution.fixedDeposit -= 10;
                } else if (risk === 'low') {
                    distribution.sip -= 10;
                    distribution.fixedDeposit += 10;
                }

                // Salary-based adjustments
                if (salary > 100000) {
                    distribution.sip += 5;
                    distribution.expenses -= 5;
                } else if (salary < 30000) {
                    distribution.expenses += 10;
                    distribution.sip -= 5;
                    distribution.savings -= 5;
                }

                // Normalize to ensure sum is 100
                const total = Object.values(distribution).reduce((a, b) => a + b, 0);
                for (let key in distribution) {
                    distribution[key] = Math.max(0, Math.round((distribution[key] / total) * 100));
                }

                return distribution;
            }
        }

        // Return rates for different investment types (annual)
        const RETURN_RATES = {
            sip: 0.12,
            emergency: 0.04,
            fixedDeposit: 0.06,
            expenses: 0,
            savings: 0.03,
            insurance: 0
        };

        let pieChartInstance = null;
        let lineChartInstance = null;

        function calculateDistribution() {
            const salary = parseFloat(document.getElementById('salary').value);
            const age = parseInt(document.getElementById('age').value);
            const risk = document.getElementById('risk').value;

            if (!salary || !age) {
                alert('Please enter valid salary and age');
                return;
            }

            // Get ML predictions
            const model = new SalaryDistributionModel();
            const distribution = model.predict(salary, age, risk);

            // Calculate amounts
            const amounts = {};
            for (let category in distribution) {
                amounts[category] = Math.round((salary * distribution[category]) / 100);
            }

            // Display distribution details
            displayDistributionDetails(amounts, distribution);

            // Create pie chart
            createPieChart(amounts);

            // Calculate and display future projections
            const projections = calculateFutureProjections(amounts, 10);
            createLineChart(projections);

            // Calculate total future value
            const futureValue = calculateTotalFutureValue(amounts, 10);
            displayFutureValue(futureValue, salary);

            // Show results section
            document.getElementById('results').style.display = 'block';
        }

        function displayDistributionDetails(amounts, percentages) {
            const grid = document.getElementById('distributionGrid');
            const colors = {
                sip: '#667eea',
                emergency: '#f39c12',
                fixedDeposit: '#27ae60',
                expenses: '#e74c3c',
                savings: '#3498db',
                insurance: '#9b59b6'
            };

            const labels = {
                sip: 'SIP (Mutual Funds)',
                emergency: 'Emergency Fund',
                fixedDeposit: 'Fixed Deposits',
                expenses: 'Monthly Expenses',
                savings: 'Savings Account',
                insurance: 'Insurance'
            };

            grid.innerHTML = '';
            for (let category in amounts) {
                const item = document.createElement('div');
                item.className = 'distribution-item';
                item.style.borderLeftColor = colors[category];
                item.innerHTML = `
                    <div class="distribution-label">${labels[category]}</div>
                    <div class="distribution-amount">â‚¹${amounts[category].toLocaleString('en-IN')}</div>
                    <div class="distribution-percentage">${percentages[category]}% of salary</div>
                `;
                grid.appendChild(item);
            }
        }

        function createPieChart(amounts) {
            const ctx = document.getElementById('pieChart').getContext('2d');
            
            if (pieChartInstance) {
                pieChartInstance.destroy();
            }

            pieChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['SIP', 'Emergency Fund', 'Fixed Deposits', 'Expenses', 'Savings', 'Insurance'],
                    datasets: [{
                        data: Object.values(amounts),
                        backgroundColor: [
                            '#667eea',
                            '#f39c12',
                            '#27ae60',
                            '#e74c3c',
                            '#3498db',
                            '#9b59b6'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': â‚¹' + context.parsed.toLocaleString('en-IN');
                                }
                            }
                        }
                    }
                }
            });
        }

        function calculateFutureProjections(amounts, years) {
            const projections = {
                labels: [],
                datasets: []
            };

            // Generate year labels
            for (let i = 0; i <= years; i++) {
                projections.labels.push('Year ' + i);
            }

            // Calculate projections for each investment type
            const investmentTypes = ['sip', 'fixedDeposit', 'savings'];
            const colors = {
                sip: '#667eea',
                fixedDeposit: '#27ae60',
                savings: '#3498db'
            };

            investmentTypes.forEach(type => {
                const data = [];
                const monthlyAmount = amounts[type];
                const annualRate = RETURN_RATES[type];

                for (let year = 0; year <= years; year++) {
                    // Future value of annuity formula
                    const fv = monthlyAmount * 12 * (Math.pow(1 + annualRate, year) - 1) / annualRate * (1 + annualRate);
                    data.push(Math.round(fv));
                }

                projections.datasets.push({
                    label: type.toUpperCase(),
                    data: data,
                    borderColor: colors[type],
                    backgroundColor: colors[type] + '20',
                    borderWidth: 2,
                    tension: 0.3
                });
            });

            return projections;
        }

        function createLineChart(projections) {
            const ctx = document.getElementById('lineChart').getContext('2d');
            
            if (lineChartInstance) {
                lineChartInstance.destroy();
            }

            lineChartInstance = new Chart(ctx, {
                type: 'line',
                data: projections,
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': â‚¹' + context.parsed.y.toLocaleString('en-IN');
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'â‚¹' + (value / 100000).toFixed(1) + 'L';
                                }
                            }
                        }
                    }
                }
            });
        }

        function calculateTotalFutureValue(amounts, years) {
            let totalFutureValue = 0;

            for (let category in amounts) {
                const monthlyAmount = amounts[category];
                const annualRate = RETURN_RATES[category];
                
                if (annualRate > 0) {
                    // Future value of annuity formula
                    const fv = monthlyAmount * 12 * (Math.pow(1 + annualRate, years) - 1) / annualRate * (1 + annualRate);
                    totalFutureValue += fv;
                }
            }

            return Math.round(totalFutureValue);
        }

        function displayFutureValue(futureValue, monthlySalary) {
            document.getElementById('futureValue').textContent = 'â‚¹' + futureValue.toLocaleString('en-IN');
            
            const totalInvested = monthlySalary * 12 * 10;
            const returns = futureValue - totalInvested;
            const returnPercentage = ((returns / totalInvested) * 100).toFixed(1);
            
            document.getElementById('futureDetail').textContent = 
                `Total Invested: â‚¹${totalInvested.toLocaleString('en-IN')} | Returns: ${returnPercentage}%`;
        }

        // Initialize with default values on load
        window.addEventListener('load', function() {
            // Auto-calculate with default values
            setTimeout(() => {
                calculateDistribution();
            }, 500);
        });
    </script>
</body>
</html>